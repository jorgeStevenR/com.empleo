<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Empleo — Corredor Ecológico</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/assets/app.css">
  <style>
    /* Fixes específicos del home para evitar desbordes horizontales */
    html, body { overflow-x: hidden; }
    .hero { overflow: hidden; }
    .hero-art { position: relative; isolation: isolate; }
    .hero-illus { overflow: hidden; }
  </style>
</head>
<body>
  <header>
    <div class="brand">Empleo · Corredor Ecológico</div>
    <div class="spacer"></div>

    <!-- Mensaje explícito de la problemática -->
    <span class="muted" style="max-width:520px; text-align:right; display:none" id="issueMsg">
      Alta tasa de desempleo en el corredor ecológico: conectamos habitantes con oportunidades locales sostenibles.
    </span>

    <a class="btn ghost" href="/job.html">Ver empleos</a>
    <a id="loginLink" class="btn" href="/login.html">Entrar</a>
    <button id="logoutBtn" class="btn ghost" style="display:none">Salir</button>
  </header>

  <main class="container page-main">
    <!-- ===== HERO ANIMADO ===== -->
    <section class="hero">
      <div class="hero-copy">
        <h1>Gestión de empleo para habitantes del <span class="grad-text">corredor ecológico</span></h1>
        <p class="muted">
          Plataforma local enfocada en reducir el desempleo del corredor ecológico:
          vacantes cercanas, empresas responsables y procesos simples para la comunidad.
        </p>
        <div class="hero-cta">
          <a class="btn" href="/login.html">Iniciar sesión</a>
          <a class="btn ghost" href="/register.html">Crear cuenta</a>
        </div>

        <div class="hero-stats">
          <div class="stat card">
            <div class="stat-num" id="statJobs">+120</div>
            <div class="muted">Ofertas activas locales</div>
          </div>
          <div class="stat card">
            <div class="stat-num">100%</div>
            <div class="muted">Enfocadas en el corredor</div>
          </div>
          <div class="stat card">
            <div class="stat-num">24/7</div>
            <div class="muted">Disponible</div>
          </div>
        </div>
      </div>

      <div class="hero-art card">
        <h3 style="margin:0 0 8px">¿Qué puedes hacer?</h3>
        <ul class="hero-list">
          <li>Buscar empleos locales y postularte</li>
          <li>Publicar vacantes con enfoque sostenible</li>
          <li>Paneles por rol (candidato/empresa/admin)</li>
        </ul>
        <div class="hero-illus">
          <div class="blob b1"></div>
          <div class="blob b2"></div>
          <div class="blob b3"></div>
        </div>
      </div>
    </section>

    <!-- ===== ACCESOS RÁPIDOS SEGÚN ROL (se muestra si hay sesión) ===== -->
    <section class="grid cards" id="panel" style="display:none; margin-top:18px"></section>

    <!-- ===== DESTACADOS ===== -->
    <section class="grid features">
      <article class="card feature">
        <h3>Empleo local y sostenible</h3>
        <p class="muted">Prioriza oportunidades del corredor y promueve prácticas responsables.</p>
      </article>
      <article class="card feature">
        <h3>Inclusión y comunidad</h3>
        <p class="muted">Aproxima empresas y talento residente para disminuir el desempleo.</p>
      </article>
      <article class="card feature">
        <h3>Proceso simple</h3>
        <p class="muted">Publica, gestiona y postúlate en minutos, desde cualquier dispositivo.</p>
      </article>
    </section>
  </main>

  <!-- ====== FOOTER ====== -->
  <footer class="site-footer">
    <div class="container footer-grid">
      <div class="foot-brand">
        <h3 class="brand">Empleo · Corredor Ecológico</h3>
        <p class="muted">Conectamos habitantes del corredor con oportunidades locales y sostenibles.</p>
      </div>

      <nav class="foot-links" aria-label="Enlaces rápidos">
        <h4>Enlaces</h4>
        <ul>
          <li><a href="/job.html">Ofertas</a></li>
          <li><a href="/employer-jobs.html">Panel empresa</a></li>
          <li><a href="/login.html">Entrar</a></li>
        </ul>
      </nav>

      <div class="foot-contact">
        <h4>Contacto</h4>
        <ul>
          <li><a href="mailto:soporte@portalempleos.test">soporte@portalempleos.test</a></li>
          <li class="muted">Lun–Vie · 9:00–18:00</li>
        </ul>
      </div>
    </div>

    <div class="footer-legal">
      <div class="container legal-row">
        <small>© <span id="year"></span> Corredor Ecológico. Todos los derechos reservados.</small>
        <div class="legal-links">
          <a href="/politica-privacidad.html">Privacidad</a>
          <a href="/terminos.html">Términos</a>
        </div>
      </div>
    </div>
  </footer>
  <!-- ====== /FOOTER ====== -->

  <script src="/assets/app.js"></script>
  <script>
    // Wire header, año y mostrar mensaje de problemática
    const { getUser, role, qs } = App;
    App.wireHeader();
    document.getElementById('year').textContent = new Date().getFullYear();
    const issue = document.getElementById('issueMsg'); if (issue) issue.style.display = 'inline';

    // Panel por rol
    const u = getUser();
    if (u){
      const p = qs('#panel'); p.style.display='grid';
      const add = (href,t,d)=>{ const a=document.createElement('a'); a.className='card'; a.href=href; a.innerHTML=`<h3>${t}</h3><p class="muted">${d}</p>`; p.appendChild(a); };
      if (role()==='EMPLOYER' || role()==='ADMIN'){
        add('/employer-jobs.html','Vacantes','Crea/gestiona empleos locales');
        add('/employer-applications.html','Postulaciones','Revisa candidatos del corredor');
        add('/companies.html','Empresas','Administra compañías del corredor');
        add('/job.html','Listado público','Cómo se ven tus vacantes');
      } else {
        add('/job.html','Empleos del corredor','Explora y postúlate');
        add('/apply.html','Postularme','Formulario directo de postulación');
      }
    }

    // (Opcional) animación de conteo para statJobs
    // const el = document.getElementById('statJobs');
    // let i=0; const target=120;
    // const iv = setInterval(()=>{ i++; el.textContent = '+'+i; if(i>=target) clearInterval(iv); }, 10);
  </script>
</body>
</html>
